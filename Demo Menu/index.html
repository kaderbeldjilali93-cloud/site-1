<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø·Ø¹Ø§Ù… | RestoPro</title>
    
    <!-- Ø§Ø³ØªÙŠØ±Ø§Ø¯ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø®Ø· Cairo -->
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&display=swap" rel="stylesheet">
    
    <style>
        body { 
            font-family: 'Cairo', sans-serif; 
            -webkit-tap-highlight-color: transparent; 
        }
        
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø­Ø±ÙƒØ© Ù„Ù„Ø£Ø²Ø±Ø§Ø± */
        .item-card { transition: transform 0.2s, background-color 0.2s; }
        .item-card:active { transform: scale(0.99); }
        
        @keyframes pop {
            0% { transform: scale(1); }
            50% { transform: scale(1.3); }
            100% { transform: scale(1); }
        }
        .pop-anim { animation: pop 0.2s ease-in-out; }

        @keyframes slideUp {
            from { transform: translateY(100%); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        .animate-slide-up-smooth { animation: slideUp 0.3s cubic-bezier(0.16, 1, 0.3, 1); }
    </style>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: { 500: '#D4AF37', 600: '#B5952F', 100: '#3D3418' }, 
                        dark: { 
                            950: '#09090b', 
                            900: '#18181b', 
                            800: '#27272a', 
                            700: '#3f3f46' 
                        }
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-dark-950 text-gray-100 pb-28 select-none">

    <!-- Ø§Ù„Ø±Ø£Ø³ (Header) -->
    <div class="fixed top-0 w-full bg-dark-950/90 backdrop-blur-md border-b border-dark-800 z-50 px-4 py-3 flex justify-between items-center shadow-md">
        <div class="flex items-center gap-2">
            <div class="w-8 h-8 bg-brand-500 rounded-lg flex items-center justify-center text-dark-950 font-black text-lg shadow-[0_0_15px_rgba(212,175,55,0.3)]">R</div>
            <h1 class="font-bold text-gray-100 text-lg">Ø¨ÙŠØ³Øª Ø¨Ø±ØºØ± <span class="text-brand-500">Ø¬ÙˆÙ„Ø¯</span></h1>
        </div>
        <div class="bg-dark-800/50 text-brand-500 border border-brand-500/30 px-3 py-1 rounded-full text-xs font-bold flex items-center gap-1.5">
            <span class="w-2 h-2 bg-green-500 rounded-full animate-pulse shadow-[0_0_8px_rgba(34,197,94,0.6)]"></span>
            Ù…ÙØªÙˆØ­ Ø§Ù„Ø¢Ù†
        </div>
    </div>

    <!-- Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª (Categories) - ØªØ¨Ù‚Ù‰ ÙÙŠ Ø§Ù„Ø£Ø¹Ù„Ù‰ -->
    <div class="mt-20 px-4 mb-6 sticky top-[60px] z-40 py-2 bg-dark-950/95 backdrop-blur-sm -mx-0">
        <div class="flex gap-3 overflow-x-auto hide-scrollbar">
            <button onclick="filterCategory('all')" class="cat-btn active bg-brand-500 text-dark-950 px-6 py-2.5 rounded-full text-sm font-bold whitespace-nowrap shadow-[0_0_15px_rgba(212,175,55,0.2)] transition-all">Ø§Ù„ÙƒÙ„</button>
            <button onclick="filterCategory('burger')" class="cat-btn bg-dark-900 text-gray-400 border border-dark-800 px-6 py-2.5 rounded-full text-sm font-bold whitespace-nowrap hover:bg-dark-800 hover:text-white transition-colors">Ø¨Ø±ØºØ±</button>
            <button onclick="filterCategory('pizza')" class="cat-btn bg-dark-900 text-gray-400 border border-dark-800 px-6 py-2.5 rounded-full text-sm font-bold whitespace-nowrap hover:bg-dark-800 hover:text-white transition-colors">Ø¨ÙŠØªØ²Ø§</button>
            <button onclick="filterCategory('drinks')" class="cat-btn bg-dark-900 text-gray-400 border border-dark-800 px-6 py-2.5 rounded-full text-sm font-bold whitespace-nowrap hover:bg-dark-800 hover:text-white transition-colors">Ù…Ø´Ø±ÙˆØ¨Ø§Øª</button>
        </div>
    </div>

    <!-- Ø´Ø¨ÙƒØ© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª (Menu Grid) - Ø¹Ø±Ø¶ Ø¹Ù…ÙˆØ¯ÙŠ -->
    <div class="px-4 grid grid-cols-1 gap-4" id="menu-container">
        <!-- Ø³ÙŠØªÙ… ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ù‡Ù†Ø§ -->
    </div>

    <!-- Ø´Ø±ÙŠØ· Ø§Ù„Ø³Ù„Ø© Ø§Ù„Ø¹Ø§Ø¦Ù… (Floating Cart Bar) - ÙŠØ¸Ù‡Ø± Ø§Ù„ØªÙƒÙ„ÙØ© Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ© -->
    <div id="cart-bar" class="fixed bottom-6 left-4 right-4 bg-brand-500 text-dark-950 p-4 rounded-2xl shadow-[0_0_30px_rgba(212,175,55,0.3)] transform translate-y-[150%] transition-transform duration-300 z-50 flex justify-between items-center cursor-pointer active:scale-95" onclick="openCartModal()">
        <div class="flex items-center gap-3">
            <div class="bg-dark-950 text-brand-500 w-10 h-10 rounded-full flex items-center justify-center font-bold text-lg shadow-lg" id="total-count">0</div>
            <div class="flex flex-col leading-tight">
                <span class="text-xs text-dark-950/80 font-bold">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</span>
                <span class="font-black text-xl" id="total-price">0 Ø¯.Ø¬</span>
            </div>
        </div>
        <div class="flex items-center gap-2 text-dark-950 font-bold bg-white/20 px-4 py-2 rounded-xl hover:bg-white/30 transition backdrop-blur-sm shadow-sm">
            Ø¹Ø±Ø¶ Ø§Ù„Ø³Ù„Ø©
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 rtl:rotate-180" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M12.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd" /></svg>
        </div>
    </div>

    <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ (Cart Modal) -->
    <div id="cart-modal" class="fixed inset-0 bg-black/80 z-[60] hidden backdrop-blur-sm flex items-end sm:items-center justify-center transition-opacity duration-300">
        <div class="bg-dark-900 border border-dark-800 w-full max-w-md rounded-t-3xl sm:rounded-3xl p-6 relative animate-slide-up-smooth shadow-2xl h-[80vh] sm:h-auto flex flex-col">
            
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-white">ØªÙØ§ØµÙŠÙ„ Ø·Ù„Ø¨Ùƒ</h2>
                <button onclick="closeCartModal()" class="w-8 h-8 bg-dark-800 rounded-full flex items-center justify-center text-gray-400 hover:text-white hover:bg-dark-700 transition">âœ•</button>
            </div>
            
            <div id="cart-items-list" class="flex-1 overflow-y-auto mb-4 space-y-3 hide-scrollbar pr-1"></div>

            <div class="border-t border-dark-800 my-4"></div>

            <div id="upsell-section" class="bg-brand-500/10 p-4 rounded-xl border border-brand-500/20 mb-6 hidden">
                <p class="text-brand-500 text-sm font-bold mb-2 flex items-center gap-1"><span>âœ¨</span> Ù‡Ù„ Ù†Ø³ÙŠØª Ø´ÙŠØ¦Ø§Ù‹ØŸ</p>
                <div class="flex justify-between items-center">
                    <div class="flex items-center gap-3">
                        <img src="https://images.unsplash.com/photo-1541592103048-f8ce6a557c71?w=100" class="w-12 h-12 rounded-lg object-cover shadow-sm grayscale-[30%]">
                        <div class="text-sm">
                            <p class="font-bold text-gray-200">Ø¨Ø·Ø§Ø·Ø³ Ù…Ù‚Ù„ÙŠØ©</p>
                            <p class="text-brand-500 font-medium">+200 Ø¯.Ø¬</p>
                        </div>
                    </div>
                    <button onclick="addUpsell()" class="bg-brand-500 text-dark-950 border border-brand-500 px-4 py-1.5 rounded-lg text-xs font-bold hover:bg-brand-600 transition-all">Ø¥Ø¶Ø§ÙØ©</button>
                </div>
            </div>

            <div class="mt-auto">
                <div class="flex justify-between items-center mb-6 bg-dark-800 p-4 rounded-xl border border-dark-700">
                    <span class="text-gray-400 font-bold">Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ:</span>
                    <span class="text-2xl font-black text-brand-500" id="final-price">0 Ø¯.Ø¬</span>
                </div>

                <button onclick="sendToWhatsapp()" class="w-full bg-[#25D366] hover:bg-[#20bd5a] text-white font-bold py-4 rounded-xl shadow-[0_0_20px_rgba(37,211,102,0.2)] flex justify-center items-center gap-2 transition-transform active:scale-95">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.893 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884-.001 2.225.651 3.891 1.746 5.634l-.999 3.648 3.742-.981zm11.387-5.464c-.074-.124-.272-.198-.57-.347-.297-.149-1.758-.868-2.031-.967-.272-.099-.47-.149-.669.149-.198.297-.768.967-.941 1.165-.173.198-.347.223-.644.074-.297-.149-1.255-.462-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.297-.347.446-.521.151-.172.2-.296.3-.495.099-.198.05-.372-.025-.521-.075-.148-.669-1.611-.916-2.206-.242-.579-.487-.501-.669-.51l-.57-.01c-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.463 1.065 2.876 1.213 3.074.149.198 2.095 3.2 5.076 4.487.709.306 1.263.489 1.694.626.712.226 1.36.194 1.872.118.571-.085 1.758-.719 2.006-1.413.248-.695.248-1.29.173-1.414z"/></svg>
                    Ø¥Ø±Ø³Ø§Ù„ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨
                </button>
            </div>
        </div>
    </div>

    <script>
        // 1. Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        const products = [
            { id: 1, name: "ØªØ´ÙŠØ² Ø¨Ø±ØºØ± ÙƒÙ„Ø§Ø³ÙŠÙƒ", price: 450, category: "burger", img: "https://images.unsplash.com/photo-1568901346375-23c9450c58cd?w=400", desc: "Ù„Ø­Ù… Ø¨Ù‚Ø±ÙŠ ØµØ§ÙÙŠØŒ Ø¬Ø¨Ù†Ø© Ø´ÙŠØ¯Ø±ØŒ ØµÙˆØµ Ø¨ÙŠØ³Øª Ø§Ù„Ø®Ø§Øµ" },
            { id: 2, name: "Ø¨Ø±ØºØ± Ø¯Ø¬Ø§Ø¬ ÙƒØ±ÙŠØ³Ø¨ÙŠ", price: 500, category: "burger", img: "https://images.unsplash.com/photo-1615297928064-24977384d0f4?w=400", desc: "ØµØ¯Ø± Ø¯Ø¬Ø§Ø¬ Ù…Ù‚Ø±Ù…Ø´ØŒ Ø®Ø³ØŒ Ù…Ø§ÙŠÙˆÙ†ÙŠØ² Ø¨Ø§Ù„Ø«ÙˆÙ…" },
            { id: 3, name: "Ø¨Ø±ØºØ± Ù…Ø´Ø±ÙˆÙ…", price: 550, category: "burger", img: "https://images.unsplash.com/photo-1594212699903-ec8a3eca50f5?w=400", desc: "Ù„Ø­Ù… Ø¨Ù‚Ø±ÙŠØŒ Ù…Ø´Ø±ÙˆÙ… Ø·Ø§Ø²Ø¬ØŒ ØµÙˆØµ Ø³ÙˆÙŠØ³Ø±ÙŠ" },
            { id: 4, name: "Ø¨ÙŠØªØ²Ø§ Ù…Ø§Ø±ØºØ±ÙŠØªØ§", price: 600, category: "pizza", img: "https://images.unsplash.com/photo-1574071318508-1cdbab80d002?w=400", desc: "ØµÙ„ØµØ© Ø·Ù…Ø§Ø·Ù… Ø¥ÙŠØ·Ø§Ù„ÙŠØ©ØŒ Ù…ÙˆØ²Ø§Ø±ÙŠÙ„Ø§ØŒ Ø±ÙŠØ­Ø§Ù†" },
            { id: 5, name: "Ø¨ÙŠØªØ²Ø§ Ø¨ÙŠØ¨Ø±ÙˆÙ†ÙŠ", price: 750, category: "pizza", img: "https://images.unsplash.com/photo-1628840042765-356cda07504e?w=400", desc: "Ø´Ø±Ø§Ø¦Ø­ Ø¨ÙŠØ¨Ø±ÙˆÙ†ÙŠ Ø¨Ù‚Ø±ÙŠØŒ Ù…ÙˆØ²Ø§Ø±ÙŠÙ„Ø§ØŒ Ø£ÙˆØ±ÙŠØºØ§Ù†Ùˆ" },
            { id: 6, name: "Ø¨ÙŠØ¨Ø³ÙŠ Ø¨Ø§Ø±Ø¯", price: 100, category: "drinks", img: "https://images.unsplash.com/photo-1629203851122-3726ecdf080e?w=400", desc: "Ø¹Ù„Ø¨Ø© 33cl" },
            { id: 7, name: "Ø¹ØµÙŠØ± Ø¨Ø±ØªÙ‚Ø§Ù„", price: 250, category: "drinks", img: "https://images.unsplash.com/photo-1613478223719-2ab802602423?w=400", desc: "Ø·Ø¨ÙŠØ¹ÙŠ ÙˆØ·Ø§Ø²Ø¬ 100%" },
            { id: 99, name: "Ø¨Ø·Ø§Ø·Ø³ Ù…Ù‚Ù„ÙŠØ©", price: 200, category: "sides", img: "https://images.unsplash.com/photo-1541592103048-f8ce6a557c71?w=400", desc: "Ø¨Ø·Ø§Ø·Ø³ Ø°Ù‡Ø¨ÙŠØ© Ù…Ù‚Ø±Ù…Ø´Ø©" }
        ];

        let cart = {};

        // 2. Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
        const container = document.getElementById('menu-container');

        function renderProducts(filter = 'all') {
            container.innerHTML = '';
            products.forEach(p => {
                if (filter === 'all' || p.category === filter) {
                    if(p.category === 'sides') return; 

                    const qty = cart[p.id] ? cart[p.id].qty : 0;
                    
                    const html = `
                    <div class="item-card bg-dark-900 p-3 rounded-2xl shadow-sm border border-dark-800 flex gap-3 items-center">
                        <img src="${p.img}" class="w-24 h-24 rounded-xl object-cover bg-dark-800 shadow-md brightness-90" alt="${p.name}">
                        <div class="flex-1 min-w-0">
                            <h3 class="font-bold text-gray-100 text-base mb-1 truncate">${p.name}</h3>
                            <p class="text-xs text-gray-400 mb-3 line-clamp-2 leading-relaxed">${p.desc}</p>
                            <div class="flex justify-between items-center">
                                <span class="font-black text-brand-500 text-lg">${p.price} <span class="text-xs font-normal text-gray-500">Ø¯.Ø¬</span></span>
                                
                                <div id="controls-${p.id}" class="h-9">
                                    ${generateControlsHTML(p.id, qty)}
                                </div>
                            </div>
                        </div>
                    </div>
                    `;
                    container.innerHTML += html;
                }
            });
        }

        // ØªÙˆÙ„ÙŠØ¯ HTML Ù„Ù„Ø£Ø²Ø±Ø§Ø± (Ù…Ù†ÙØµÙ„ Ù„ÙŠØ³Ù‡Ù„ Ø§Ù„ØªØ­Ø¯ÙŠØ«)
        function generateControlsHTML(id, qty) {
            if (qty > 0) {
                return `
                <div class="flex items-center bg-dark-800 rounded-lg p-1 gap-2 border border-dark-700 h-full animate-slide-up-smooth">
                    <button onclick="updateCart(${id}, -1)" class="w-8 h-full bg-dark-700 rounded-md text-gray-300 font-bold flex items-center justify-center hover:bg-red-900/30 hover:text-red-400 border border-dark-600 transition">-</button>
                    <span class="font-bold text-base w-6 text-center text-white">${qty}</span>
                    <button onclick="updateCart(${id}, 1)" class="w-8 h-full bg-brand-500 rounded-md text-dark-950 font-bold flex items-center justify-center hover:bg-brand-600 active:scale-95 transition-transform">+</button>
                </div>
                `;
            } else {
                return `
                <button onclick="updateCart(${id}, 1)" class="w-9 h-full bg-dark-800 border border-dark-700 text-brand-500 rounded-lg shadow-sm font-bold flex items-center justify-center hover:bg-brand-500 hover:text-dark-950 transition-all active:scale-90">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd" />
                    </svg>
                </button>
                `;
            }
        }

        // 3. ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø³Ù„Ø© (Ø°ÙƒÙŠ - ÙŠØ­Ø¯Ø« ÙÙ‚Ø· Ø§Ù„Ø¹Ù†ØµØ± Ø§Ù„Ù…Ø·Ù„ÙˆØ¨)
        function updateCart(id, change) {
            if (!cart[id]) cart[id] = { ...products.find(p => p.id === id), qty: 0 };
            
            const oldQty = cart[id].qty;
            cart[id].qty += change;
            
            if (cart[id].qty <= 0) {
                delete cart[id];
            }
            
            // ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¹Ù†ØµØ± Ø§Ù„Ù…Ø­Ø¯Ø¯ ÙÙ‚Ø· (Ø¨Ø¯ÙˆÙ† Ø¥Ø¹Ø§Ø¯Ø© Ø±Ø³Ù… Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© ÙƒØ§Ù…Ù„Ø©)
            const controlsDiv = document.getElementById(`controls-${id}`);
            if (controlsDiv) {
                const newQty = cart[id] ? cart[id].qty : 0;
                controlsDiv.innerHTML = generateControlsHTML(id, newQty);
                
                // Ø¥Ø¶Ø§ÙØ© Ø­Ø±ÙƒØ© Ù„Ù„Ø±Ù‚Ù… Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø²ÙŠØ§Ø¯Ø©
                if (change > 0 && newQty > 0) {
                    const span = controlsDiv.querySelector('span');
                    if(span) span.classList.add('pop-anim');
                }
            }

            updateCartBar();
            
            if(navigator.vibrate) navigator.vibrate(40);
        }

        function updateCartBar() {
            const totalQty = Object.values(cart).reduce((a, b) => a + b.qty, 0);
            const totalPrice = Object.values(cart).reduce((a, b) => a + (b.price * b.qty), 0);

            document.getElementById('total-count').innerText = totalQty;
            document.getElementById('total-price').innerText = totalPrice + ' Ø¯.Ø¬';
            document.getElementById('final-price').innerText = totalPrice + ' Ø¯.Ø¬';

            const cartBar = document.getElementById('cart-bar');
            if (totalQty > 0) cartBar.classList.remove('translate-y-[150%]');
            else cartBar.classList.add('translate-y-[150%]');
        }

        // 4. Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª
        function filterCategory(cat) {
            document.querySelectorAll('.cat-btn').forEach(b => {
                b.classList.remove('active', 'bg-brand-500', 'text-dark-950', 'shadow-[0_0_15px_rgba(212,175,55,0.2)]');
                b.classList.add('bg-dark-900', 'text-gray-400', 'border', 'border-dark-800');
            });
            event.target.classList.remove('bg-dark-900', 'text-gray-400', 'border', 'border-dark-800');
            event.target.classList.add('active', 'bg-brand-500', 'text-dark-950', 'shadow-[0_0_15px_rgba(212,175,55,0.2)]');
            renderProducts(cat);
        }

        // 5. Ø§Ù„Ù…ÙˆØ¯Ø§Ù„
        function openCartModal() {
            const list = document.getElementById('cart-items-list');
            list.innerHTML = '';
            
            let hasSides = false;
            if (Object.keys(cart).length === 0) return;

            Object.values(cart).forEach(item => {
                if(item.category === 'sides') hasSides = true;
                list.innerHTML += `
                    <div class="flex justify-between items-center text-sm border-b border-dark-800 pb-3 last:border-0 animate-slide-up-smooth">
                        <div class="flex items-center gap-3">
                            <span class="bg-dark-800 text-brand-500 px-2.5 py-1 rounded text-xs font-bold border border-dark-700">x${item.qty}</span>
                            <span class="font-medium text-gray-200">${item.name}</span>
                        </div>
                        <div class="flex items-center gap-3">
                             <span class="font-bold text-brand-500">${item.price * item.qty} Ø¯.Ø¬</span>
                             <button onclick="removeFromCart(${item.id})" class="text-red-400 text-xs px-2 py-1 bg-red-900/10 rounded hover:bg-red-900/30 transition">âœ•</button>
                        </div>
                    </div>
                `;
            });

            const upsellSection = document.getElementById('upsell-section');
            if(!hasSides) upsellSection.classList.remove('hidden');
            else upsellSection.classList.add('hidden');

            document.getElementById('cart-modal').classList.remove('hidden');
        }

        function closeCartModal() {
            document.getElementById('cart-modal').classList.add('hidden');
        }

        function removeFromCart(id) {
            delete cart[id];
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ø£ÙŠØ¶Ø§Ù‹ Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù…Ø±Ø¦ÙŠØ©
            const controlsDiv = document.getElementById(`controls-${id}`);
            if(controlsDiv) controlsDiv.innerHTML = generateControlsHTML(id, 0);
            
            updateCartBar();
            openCartModal();
            if(Object.keys(cart).length === 0) closeCartModal();
        }

        function addUpsell() {
            updateCart(99, 1);
            openCartModal();
        }

        // 6. ÙˆØ§ØªØ³Ø§Ø¨
        function sendToWhatsapp() {
            const phone = "213600000000";
            const tableNumber = 5;
            
            let message = `Ù…Ø±Ø­Ø¨Ø§ *RestoPro* ğŸ‘‹\nØ£ÙˆØ¯ ØªÙ‚Ø¯ÙŠÙ… Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ (Ø·Ø§ÙˆÙ„Ø© ${tableNumber}):\n\n`;
            Object.values(cart).forEach(item => {
                message += `â–«ï¸ ${item.name} *(x${item.qty})* - ${item.price * item.qty} Ø¯.Ø¬\n`;
            });
            const total = document.getElementById('final-price').innerText;
            message += `\nğŸ’° *Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ: ${total}*`;

            const url = `https://wa.me/${phone}?text=${encodeURIComponent(message)}`;
            window.open(url, '_blank');
        }

        renderProducts();
    </script>
</body>
</html>