<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ∑ÿπÿßŸÖ | PRESTIGE</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&display=swap" rel="stylesheet">
    
    <style>
        body { 
            font-family: 'Cairo', sans-serif; 
            -webkit-tap-highlight-color: transparent; 
            scroll-behavior: smooth;
        }
        
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        /* Zoom In Animation */
        @keyframes zoomInSmooth {
            0% { opacity: 0; transform: scale(0.8); }
            100% { opacity: 1; transform: scale(1); }
        }
        .animate-zoom-in { animation: zoomInSmooth 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards; opacity: 0; }

        /* Slide Up Reveal Class */
        .reveal-on-scroll {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.6s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .reveal-visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Active Tab LED Glow */
        .nav-active {
            background-color: #D4AF37 !important;
            color: #09090b !important;
            box-shadow: 0 0 15px rgba(212, 175, 55, 0.5), inset 0 0 5px rgba(255, 255, 255, 0.2);
            border-color: #D4AF37 !important;
            transform: scale(1.05);
        }

        .item-card { transition: transform 0.2s, box-shadow 0.2s; }
        .item-card:active { transform: scale(0.97); }
        
        @keyframes pop {
            0% { transform: scale(1); }
            50% { transform: scale(1.3); }
            100% { transform: scale(1); }
        }
        .pop-anim { animation: pop 0.2s ease-in-out; }

        @keyframes slideUpModal {
            from { transform: translateY(100%); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        .animate-slide-up-smooth { animation: slideUpModal 0.4s cubic-bezier(0.16, 1, 0.3, 1); }
        
        /* Logo Glow Animation */
        @keyframes logoPulse {
            0%, 100% { filter: drop-shadow(0 0 8px rgba(212,175,55,0.6)); }
            50% { filter: drop-shadow(0 0 15px rgba(212,175,55,0.9)); }
        }
        .logo-glow { animation: logoPulse 3s infinite; }

        /* ÿ™ÿ£ÿ´Ÿäÿ± ÿ™ŸàŸáÿ¨ ÿßŸÑÿπŸÜÿßŸàŸäŸÜ */
        @keyframes titleGlow {
            0%, 100% { text-shadow: 0 0 10px rgba(212, 175, 55, 0.2); color: #ffffff; transform: scale(1); }
            50% { text-shadow: 0 0 25px rgba(212, 175, 55, 0.8), 0 0 10px rgba(255, 255, 255, 0.4); color: #D4AF37; transform: scale(1.05); }
        }
        
        .reveal-visible .glow-text-anim {
            animation: titleGlow 2s infinite ease-in-out;
        }
    </style>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: { 500: '#D4AF37', 600: '#B5952F', 100: '#3D3418' }, 
                        dark: { 950: '#09090b', 900: '#18181b', 800: '#27272a', 700: '#3f3f46' }
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-dark-950 text-gray-100 pb-28 select-none">

    <!-- ÿßŸÑÿ±ÿ£ÿ≥ (Header) - ŸÖŸÖÿ±ŸÉÿ≤ -->
    <div class="fixed top-0 w-full bg-dark-950/90 backdrop-blur-xl border-b border-dark-800 z-50 transition-all duration-300">
        <!-- ÿßŸÑÿ¥ÿπÿßÿ± ŸÅŸä ÿßŸÑŸàÿ≥ÿ∑ -->
        <div class="pt-4 pb-2 flex justify-center items-center animate-zoom-in">
            <div class="relative group cursor-default flex items-center gap-3">
                <div class="absolute -inset-4 bg-brand-500/10 rounded-full blur-lg opacity-0 group-hover:opacity-100 transition duration-500"></div>
                
                <!-- ÿ£ŸäŸÇŸàŸÜÿ© ÿßŸÑÿ∑ÿ®ÿßÿÆ ÿßŸÑŸÖÿ¥ÿπÿ© -->
                <div class="logo-glow text-brand-500">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12,2A5,5,0,0,1,17,7C17,7.76 16.8,8.47 16.44,9.11C18.5,9.5 20,11.31 20,13.5A3.5,3.5,0,0,1,16.5,17H16V22H14V17H10V22H8V17H7.5A3.5,3.5,0,0,1,4,13.5C4,11.31 5.5,9.5 7.56,9.11C7.2,8.47 7,7.76 7,7A5,5,0,0,1,12,2M12,4A3,3,0,0,0,9,7C9,7.5 9.13,7.97 9.35,8.38C10.13,8.13 11.03,8 12,8C12.97,8 13.87,8.13 14.65,8.38C14.87,7.97 15,7.5 15,7A3,3,0,0,0,12,4Z" />
                    </svg>
                </div>

                <div class="relative leading-none flex items-center">
                    <span class="text-3xl font-black tracking-tighter text-white font-sans drop-shadow-lg">
                        ŸÖÿ∑ÿπŸÖ <span class="text-brand-500">ÿßŸÑŸÅÿÆÿßŸÖÿ©</span>
                    </span>
                </div>
            </div>
        </div>

        <!-- ÿ¥ÿ±Ÿäÿ∑ ÿßŸÑÿ™ÿµŸÜŸäŸÅÿßÿ™ (ÿ™ÿ≠ÿ™ ÿßŸÑÿ¥ÿπÿßÿ± ŸÖÿ®ÿßÿ¥ÿ±ÿ©) -->
        <div class="px-2 pb-3 overflow-x-auto hide-scrollbar flex justify-center">
            <div class="flex gap-2 min-w-max px-2">
                <a href="#section-burger" id="nav-burger" class="nav-btn transition-all duration-300 bg-dark-900 text-gray-400 border border-dark-800 px-5 py-2 rounded-xl text-sm font-bold shadow-sm">Burger</a>
                <a href="#section-pizza" id="nav-pizza" class="nav-btn transition-all duration-300 bg-dark-900 text-gray-400 border border-dark-800 px-5 py-2 rounded-xl text-sm font-bold shadow-sm">Pizza</a>
                <a href="#section-drinks" id="nav-drinks" class="nav-btn transition-all duration-300 bg-dark-900 text-gray-400 border border-dark-800 px-5 py-2 rounded-xl text-sm font-bold shadow-sm">Boissons</a>
                <a href="#section-sides" id="nav-sides" class="nav-btn transition-all duration-300 bg-dark-900 text-gray-400 border border-dark-800 px-5 py-2 rounded-xl text-sm font-bold shadow-sm">Suppl√©ments</a>
            </div>
        </div>
    </div>

    <!-- ÿßŸÑŸÖÿ≠ÿ™ŸàŸâ ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿä (Main Content) -->
    <!-- ÿ≤ŸäÿßÿØÿ© ÿßŸÑŸáÿßŸÖÿ¥ ÿßŸÑÿπŸÑŸàŸä ŸÑÿ£ŸÜ ÿßŸÑŸáŸäÿØÿ± ÿ£ÿµÿ®ÿ≠ ÿ£ÿ∑ŸàŸÑ -->
    <div class="mt-[130px] px-3 space-y-10 pb-8" id="main-container">
        
        <!-- ŸÇÿ≥ŸÖ ÿßŸÑÿ®ÿ±ÿ∫ÿ± -->
        <section id="section-burger" class="scroll-mt-44">
            <div class="flex items-center justify-center gap-3 mb-4 reveal-on-scroll">
                <div class="h-[1px] w-8 bg-brand-500/50"></div>
                <h2 class="text-xl font-black text-white uppercase tracking-wider glow-text-anim transition-all duration-300">Burger</h2>
                <div class="h-[1px] w-8 bg-brand-500/50"></div>
            </div>
            <!-- Grid Cols 2 -->
            <div class="grid grid-cols-2 gap-3" id="grid-burger"></div>
        </section>

        <!-- ŸÇÿ≥ŸÖ ÿßŸÑÿ®Ÿäÿ™ÿ≤ÿß -->
        <section id="section-pizza" class="scroll-mt-44">
            <div class="flex items-center justify-center gap-3 mb-4 reveal-on-scroll">
                <div class="h-[1px] w-8 bg-brand-500/50"></div>
                <h2 class="text-xl font-black text-white uppercase tracking-wider glow-text-anim transition-all duration-300">Pizza</h2>
                <div class="h-[1px] w-8 bg-brand-500/50"></div>
            </div>
            <div class="grid grid-cols-2 gap-3" id="grid-pizza"></div>
        </section>

        <!-- ŸÇÿ≥ŸÖ ÿßŸÑŸÖÿ¥ÿ±Ÿàÿ®ÿßÿ™ -->
        <section id="section-drinks" class="scroll-mt-44">
            <div class="flex items-center justify-center gap-3 mb-4 reveal-on-scroll">
                <div class="h-[1px] w-8 bg-brand-500/50"></div>
                <h2 class="text-xl font-black text-white uppercase tracking-wider glow-text-anim transition-all duration-300">Boissons</h2>
                <div class="h-[1px] w-8 bg-brand-500/50"></div>
            </div>
            
            <div class="space-y-6">
                <div>
                    <h3 class="text-xs text-brand-500 font-bold mb-2 px-1 reveal-on-scroll opacity-80 text-center">Sodas</h3>
                    <div class="grid grid-cols-2 gap-3" id="grid-drinks-soda"></div>
                </div>
                <div>
                    <h3 class="text-xs text-brand-500 font-bold mb-2 px-1 reveal-on-scroll opacity-80 text-center">Jus</h3>
                    <div class="grid grid-cols-2 gap-3" id="grid-drinks-juice"></div>
                </div>
                <div>
                    <h3 class="text-xs text-brand-500 font-bold mb-2 px-1 reveal-on-scroll opacity-80 text-center">Eaux</h3>
                    <div class="grid grid-cols-2 gap-3" id="grid-drinks-water"></div>
                </div>
            </div>
        </section>

        <!-- ŸÇÿ≥ŸÖ ÿßŸÑÿ¨ÿßŸÜÿ®Ÿä -->
        <section id="section-sides" class="scroll-mt-44">
            <div class="flex items-center justify-center gap-3 mb-4 reveal-on-scroll">
                <div class="h-[1px] w-8 bg-brand-500/50"></div>
                <h2 class="text-xl font-black text-white uppercase tracking-wider glow-text-anim transition-all duration-300">Suppl√©ments</h2>
                <div class="h-[1px] w-8 bg-brand-500/50"></div>
            </div>
            <div class="grid grid-cols-2 gap-3" id="grid-sides"></div>
        </section>

    </div>

    <!-- ÿ¥ÿ±Ÿäÿ∑ ÿßŸÑÿ≥ŸÑÿ© ÿßŸÑÿπÿßÿ¶ŸÖ -->
    <div id="cart-bar" class="fixed bottom-6 left-4 right-4 bg-gradient-to-r from-brand-500 to-brand-600 text-dark-950 p-3 rounded-2xl shadow-[0_0_30px_rgba(212,175,55,0.3)] transform translate-y-[150%] transition-transform duration-500 cubic-bezier(0.175, 0.885, 0.32, 1.275) z-50 flex justify-between items-center cursor-pointer active:scale-95 border border-white/20" onclick="openCartModal()">
        <div class="flex items-center gap-3">
            <div class="bg-dark-950 text-brand-500 w-10 h-10 rounded-full flex items-center justify-center font-black text-lg shadow-inner border border-brand-600" id="total-count">0</div>
            <div class="flex flex-col leading-none">
                <span class="text-[10px] text-dark-900 font-bold uppercase tracking-wider">Total</span>
                <span class="font-black text-xl" id="total-price">0 ÿØ.ÿ¨</span>
            </div>
        </div>
        <div class="flex items-center gap-2 text-dark-950 font-bold bg-white/20 px-4 py-2 rounded-xl hover:bg-white/30 transition backdrop-blur-md border border-white/10 text-sm">
            <span>ÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ∑ŸÑÿ®ŸÉ</span>
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 rtl:rotate-180" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd" /></svg>
        </div>
    </div>

    <!-- ŸÜÿßŸÅÿ∞ÿ© ÿßŸÑŸÖŸàÿØÿßŸÑ -->
    <div id="cart-modal" class="fixed inset-0 bg-dark-950/90 z-[60] hidden backdrop-blur-md flex items-end sm:items-center justify-center transition-opacity duration-300">
        <div class="bg-dark-900 border border-dark-700 w-full max-w-md rounded-t-3xl sm:rounded-3xl p-6 relative animate-slide-up-smooth shadow-2xl h-[85vh] sm:h-auto flex flex-col">
            
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-2xl font-bold text-white flex items-center gap-2">
                    <span class="text-brand-500">üõí</span> ÿ≥ŸÑÿ© ÿßŸÑŸÖÿ¥ÿ™ÿ±Ÿäÿßÿ™
                </h2>
                <button onclick="closeCartModal()" class="w-9 h-9 bg-dark-800 rounded-full flex items-center justify-center text-gray-400 hover:text-white hover:bg-dark-700 transition border border-dark-700">‚úï</button>
            </div>
            
            <div id="cart-items-list" class="flex-1 overflow-y-auto mb-2 space-y-3 hide-scrollbar pr-1"></div>

            <!-- ÿßŸÑŸÅŸàÿ™ÿ±: ÿßŸÑÿ≥ÿπÿ± + ÿßŸÑÿßŸÇÿ™ÿ±ÿßÿ≠ÿßÿ™ + ÿßŸÑÿ≤ÿ± -->
            <div class="mt-auto space-y-4 pt-4 border-t border-dark-800">
                
                <!-- ÿßŸÑÿ≥ÿπÿ± ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸä (ŸÜŸÇŸÑ ŸÑŸÑÿ£ÿπŸÑŸâ) -->
                <div class="flex justify-between items-center bg-dark-800 p-4 rounded-xl border border-dark-700 shadow-inner">
                    <span class="text-gray-400 font-bold">Total</span>
                    <span class="text-3xl font-black text-brand-500" id="final-price">0 ÿØ.ÿ¨</span>
                </div>

                <!-- ŸÇÿ≥ŸÖ ÿßŸÑÿπÿ±Ÿàÿ∂ ÿßŸÑÿ•ÿ∂ÿßŸÅŸäÿ© (Upsell) -->
                <div id="upsell-section" class="flex flex-col gap-3 hidden">
                    <!-- ÿ≥Ÿäÿ™ŸÖ ŸÖŸÑÿ§Ÿá ÿ®Ÿàÿßÿ≥ÿ∑ÿ© JS -->
                </div>

                <!-- ÿ≤ÿ± ÿßŸÑÿ•ÿ±ÿ≥ÿßŸÑ -->
                <button onclick="submitOrder()" class="w-full bg-gradient-to-r from-[#25D366] to-[#128C7E] hover:from-[#20bd5a] hover:to-[#0e7a6d] text-white font-bold py-4 rounded-xl shadow-[0_0_20px_rgba(37,211,102,0.3)] flex justify-center items-center gap-3 transition-transform active:scale-95 border-t border-white/20">
                    <span>ÿ™ÿ£ŸÉŸäÿØ Ÿàÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ∑ŸÑÿ®</span>
                </button>
            </div>
        </div>
    </div>
// ÿØÿßŸÑÿ© ÿßÿ≥ÿ™ÿØÿπÿßÿ° ÿßŸÑŸÜÿßÿØŸÑ
    async function callWaiter() {
        const btn = document.getElementById('waiter-btn');
        const originalContent = btn.innerHTML;
        
        // ÿ™ÿ∫ŸäŸäÿ± ÿ¥ŸÉŸÑ ÿßŸÑÿ≤ÿ± ŸÑÿ•ÿ∏Ÿáÿßÿ± ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ
        btn.innerHTML = `<svg class="animate-spin h-5 w-5 text-brand-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>`;
        btn.disabled = true;

        try {
            const tableNum = getTableNumber(); // ÿ¨ŸÑÿ® ÿ±ŸÇŸÖ ÿßŸÑÿ∑ÿßŸàŸÑÿ©
            
            // üî¥ ŸáÿßŸÖ ÿ¨ÿØÿßŸã: ÿ∂ÿπ ÿ±ÿßÿ®ÿ∑ ÿßŸÑŸàŸäÿ® ŸáŸàŸÉ ÿßŸÑÿ¨ÿØŸäÿØ ŸáŸÜÿß üî¥
            const WH_URL = "https://n8n.panel.vidsai.site/webhook/146e5a16-fe2c-4d4e-8284-4f6900a40931"; 

            await fetch(WH_URL, { 
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ table: tableNum, type: 'help' })
            });

            // ÿπŸÑÿßŸÖÿ© ÿßŸÑŸÜÿ¨ÿßÿ≠ (ÿµÿ≠ ÿÆÿ∂ÿ±ÿßÿ°)
            btn.classList.remove('border-brand-500', 'text-brand-500');
            btn.classList.add('border-green-500', 'text-green-500');
            btn.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" /></svg>`;

        } catch (error) {
            console.error(error);
            alert("ŸÅÿ¥ŸÑ ÿßŸÑÿßÿ™ÿµÿßŸÑÿå ÿ≠ÿßŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ.");
        } finally {
            // ÿ•ÿπÿßÿØÿ© ÿßŸÑÿ≤ÿ± ŸÑÿ≠ÿßŸÑÿ™Ÿá ÿßŸÑÿ£ÿµŸÑŸäÿ© ÿ®ÿπÿØ 3 ÿ´ŸàÿßŸÜŸä
            setTimeout(() => {
                btn.classList.add('border-brand-500', 'text-brand-500');
                btn.classList.remove('border-green-500', 'text-green-500');
                btn.innerHTML = originalContent;
                btn.disabled = false;
            }, 3000);
        }
    }
    <script>
        // 1. ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™
        const products = [
            // --- Burger ---
            { id: 1, name: "Cheeseburger", price: 450, category: "burger", img: "https://images.unsplash.com/photo-1568901346375-23c9450c58cd?w=400", desc: "B≈ìuf pur, cheddar, sauce sp√©ciale" },
            { id: 2, name: "Chicken Crispy", price: 500, category: "burger", img: "JPG 2", desc: "Poulet croustillant, laitue, mayo" },
            { id: 3, name: "Mushroom Swiss", price: 550, category: "burger", img: "https://images.unsplash.com/photo-1594212699903-ec8a3eca50f5?w=400", desc: "B≈ìuf, champignons frais, suisse" },
            { id: 4, name: "Double Cheese", price: 650, category: "burger", img: "https://images.unsplash.com/photo-1550547660-d9450f859349?w=400", desc: "Double b≈ìuf, double fromage" },
            { id: 5, name: "Zinger Spicy", price: 550, category: "burger", img: "JPG 5", desc: "Poulet √©pic√©, jalape√±o" },
            { id: 6, name: "BBQ Beef", price: 600, category: "burger", img: "https://images.unsplash.com/photo-1596662951482-0c4ba74a6df6?w=400", desc: "B≈ìuf, oignons croustillants, BBQ" },

            // --- Pizza ---
            { id: 7, name: "Margherita", price: 600, category: "pizza", img: "https://images.unsplash.com/photo-1574071318508-1cdbab80d002?w=400", desc: "Sauce tomate, mozzarella, basilic" },
            { id: 8, name: "Pepperoni", price: 750, category: "pizza", img: "https://images.unsplash.com/photo-1628840042765-356cda07504e?w=400", desc: "Pepperoni, mozzarella, origan" },
            { id: 9, name: "4 Saisons", price: 800, category: "pizza", img: "https://images.unsplash.com/photo-1513104890138-7c749659a591?w=400", desc: "Mozzarella, champignons, olives" },
            { id: 10, name: "V√©g√©tarienne", price: 650, category: "pizza", img: "https://images.unsplash.com/photo-1595708684082-a173bb3a06c5?w=400", desc: "L√©gumes frais, mozzarella" },
            { id: 11, name: "Poulet BBQ", price: 850, category: "pizza", img: "https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?w=400", desc: "Poulet, sauce BBQ, oignons" },
            { id: 12, name: "Thon", price: 750, category: "pizza", img: "https://images.unsplash.com/photo-1555072956-7758afb20e8f?w=400", desc: "Thon, oignons, olives" },

            // --- Drinks ---
            { id: 13, name: "Hamoud", price: 120, category: "drinks", sub_category: "soda", img: "JPG 13", desc: "33cl" },
            { id: 14, name: "Coca-Cola", price: 120, category: "drinks", sub_category: "soda", img: "JPG 14", desc: "33cl" },
            { id: 15, name: "Pepsi", price: 120, category: "drinks", sub_category: "soda", img: "JPG 15", desc: "33cl" },
            
            { id: 16, name: "slim orange", price: 120, category: "drinks", sub_category: "soda", img: "JPG 16", desc: "33cl" },
            { id: 17, name: "slim citron", price: 120, category: "drinks", sub_category: "soda", img: "JPG 17", desc: "33cl" },
            { id: 18, name: "selecto", price: 120, category: "drinks", sub_category: "soda", img: "JPG 18", desc: "33cl" },
            
            { id: 19, name: "tazij", price: 60, category: "drinks", sub_category: "juice", img: "JPG 19", desc: "Jus d'orange" },
            { id: 20, name: "Ramy", price: 70, category: "drinks", sub_category: "juice", img: "JPG 20", desc: "Fraise" },
            { id: 21, name: "Rouiba", price: 60, category: "drinks", sub_category: "juice", img: "JPG 21", desc: "Mangue" },
            { id: 22, name: "Ramy (1L)", price: 180, category: "drinks", sub_category: "juice", img: "JPG 22", desc: "P√™che avec pulpe" },
            { id: 23, name: "Rouiba (1L)", price: 140, category: "drinks", sub_category: "juice", img: "JPG 23", desc: "Citronnade" },
            { id: 24, name: "tazij (1L)", price: 150, category: "drinks", sub_category: "juice", img: "JPG 24", desc: "M√©lange de fruits" },
            
            { id: 25, name: "Ifri (1L)", price: 50, category: "drinks", sub_category: "water", img: "JPG 25", desc: "0.5 L" },
            { id: 26, name: "Ifri (0,5L)", price: 80, category: "drinks", sub_category: "water", img: "JPG 26", desc: "1.5 L" },

            // --- Sides ---
            { id: 27, name: "Frites", price: 200, category: "sides", sub_category: "", img: "https://images.unsplash.com/photo-1630384031162-91ad75aa397a?w=400", desc: "Croustillantes" },
            { id: 31, name: "Mayonnaise", price: 0, category: "sides", sub_category: "", img: "JPG 31", desc: "Gratuit" },
            { id: 32, name: "Harissa", price: 0, category: "sides", sub_category: "", img: "JPG 32", desc: "Gratuit" },
            { id: 33, name: "Ketchup", price: 0, category: "sides", sub_category: "", img: "JPG 33", desc: "Gratuit" }
        ];

        let cart = {};

        // 2. ÿØÿßŸÑÿ© ÿ™ŸàŸÑŸäÿØ ÿ®ÿ∑ÿßŸÇÿ© ÿßŸÑŸÖŸÜÿ™ÿ¨
        function createProductCard(p) {
            const qty = cart[p.id] ? cart[p.id].qty : 0;
            // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑÿ≥ÿπÿ± ÿßŸÑŸÖÿ¨ÿßŸÜŸä
            const priceDisplay = p.price === 0 ? "Gratuit" : `${p.price} <span class="text-[9px] font-normal text-gray-500">DA</span>`;
            
            return `
            <div class="item-card bg-dark-900 rounded-2xl shadow-lg shadow-black/30 border border-dark-800 flex flex-col overflow-hidden reveal-on-scroll group hover:border-dark-700 h-full">
                <!-- 1. ÿßŸÑŸÇÿ≥ŸÖ ÿßŸÑÿπŸÑŸàŸä -->
                <div class="aspect-square w-full relative overflow-hidden">
                    <img src="${p.img}" class="w-full h-full object-cover brightness-90 group-hover:brightness-100 group-hover:scale-110 transition duration-500" alt="${p.name}">
                    <div class="absolute inset-0 bg-gradient-to-t from-dark-900/50 to-transparent opacity-40"></div>
                </div>
                
                <!-- 2. ÿßŸÑŸÇÿ≥ŸÖ ÿßŸÑÿ£Ÿàÿ≥ÿ∑ -->
                <div class="p-3 text-center flex-1 flex flex-col justify-center border-t border-dark-800/50">
                    <h3 class="font-bold text-gray-100 text-sm mb-1 leading-tight tracking-wide">${p.name}</h3>
                    <p class="text-[10px] text-gray-400 line-clamp-2 leading-relaxed font-light">${p.desc}</p>
                </div>
                
                <!-- 3. ÿßŸÑŸÇÿ≥ŸÖ ÿßŸÑÿ≥ŸÅŸÑŸä -->
                <div class="p-3 pt-0 flex justify-center items-center gap-3">
                    <span class="font-black text-brand-500 text-base drop-shadow-sm">${priceDisplay}</span>
                    
                    <div id="controls-${p.id}" class="h-8 flex items-center">
                        ${generateControlsHTML(p.id, qty)}
                    </div>
                </div>
            </div>
            `;
        }

        function generateControlsHTML(id, qty) {
            if (qty > 0) {
                return `
                <div class="flex items-center bg-dark-800 rounded-lg p-0.5 gap-1 border border-dark-700 h-full animate-zoom-in">
                    <button onclick="updateCart(${id}, -1)" class="w-7 h-full bg-dark-700 rounded-md text-gray-300 font-bold flex items-center justify-center hover:bg-red-900/30 hover:text-red-400 border border-dark-600 transition text-xs">-</button>
                    <span class="font-bold text-sm w-5 text-center text-white">${qty}</span>
                    <button onclick="updateCart(${id}, 1)" class="w-7 h-full bg-brand-500 rounded-md text-dark-950 font-bold flex items-center justify-center hover:bg-brand-600 active:scale-95 transition-transform text-xs">+</button>
                </div>
                `;
            } else {
                return `
                <button onclick="updateCart(${id}, 1)" class="w-8 h-8 bg-dark-800 border border-dark-700 text-brand-500 rounded-lg shadow-sm font-bold flex items-center justify-center hover:bg-brand-500 hover:text-dark-950 transition-all active:scale-90 group-hover:bg-dark-700">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd" />
                    </svg>
                </button>
                `;
            }
        }

        // 3. ÿπÿ±ÿ∂ ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™
        function renderAllSections() {
            // Burger
            document.getElementById('grid-burger').innerHTML = products
                .filter(p => p.category === 'burger')
                .map(createProductCard).join('');
            
            // Pizza
            document.getElementById('grid-pizza').innerHTML = products
                .filter(p => p.category === 'pizza')
                .map(createProductCard).join('');
            
            // Drinks
            document.getElementById('grid-drinks-soda').innerHTML = products
                .filter(p => p.category === 'drinks' && p.sub_category === 'soda')
                .map(createProductCard).join('');
            
            document.getElementById('grid-drinks-juice').innerHTML = products
                .filter(p => p.category === 'drinks' && p.sub_category === 'juice')
                .map(createProductCard).join('');

            document.getElementById('grid-drinks-water').innerHTML = products
                .filter(p => p.category === 'drinks' && p.sub_category === 'water')
                .map(createProductCard).join('');

            // Sides
            document.getElementById('grid-sides').innerHTML = products
                .filter(p => p.category === 'sides')
                .map(createProductCard).join('');
        }

        // 4. ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ≥ŸÑÿ©
        function updateCart(id, change) {
            if (!cart[id]) cart[id] = { ...products.find(p => p.id === id), qty: 0 };
            cart[id].qty += change;
            if (cart[id].qty <= 0) delete cart[id];
            
            const controlsDiv = document.getElementById(`controls-${id}`);
            if (controlsDiv) {
                const newQty = cart[id] ? cart[id].qty : 0;
                controlsDiv.innerHTML = generateControlsHTML(id, newQty);
                if (change > 0 && newQty > 0) {
                    const span = controlsDiv.querySelector('span');
                    if(span) span.classList.add('pop-anim');
                }
            }
            updateCartBar();
            if(navigator.vibrate) navigator.vibrate(40);
        }

        function updateCartBar() {
            const totalQty = Object.values(cart).reduce((a, b) => a + b.qty, 0);
            const totalPrice = Object.values(cart).reduce((a, b) => a + (b.price * b.qty), 0);

            document.getElementById('total-count').innerText = totalQty;
            document.getElementById('total-price').innerText = totalPrice + ' ÿØ.ÿ¨';
            document.getElementById('final-price').innerText = totalPrice + ' ÿØ.ÿ¨';

            const cartBar = document.getElementById('cart-bar');
            if (totalQty > 0) cartBar.classList.remove('translate-y-[150%]');
            else cartBar.classList.add('translate-y-[150%]');
        }

        // 5. ÿßŸÑŸÖŸàÿØÿßŸÑ ŸÖÿπ ŸÖŸÜÿ∑ŸÇ Upsell ÿßŸÑÿ¨ÿØŸäÿØ
        function openCartModal() {
            const list = document.getElementById('cart-items-list');
            list.innerHTML = '';
            
            // ŸÖÿ™ÿ∫Ÿäÿ±ÿßÿ™ ŸÑÿ™ÿ™ÿ®ÿπ ÿ≠ÿßŸÑÿ© ÿßŸÑÿ≥ŸÑÿ©
            let hasDrinks = false; // Ÿäÿ¥ŸÖŸÑ Sodas Ÿà Juice
            let hasWater = false;
            let hasFries = false;
            
            if (Object.keys(cart).length === 0) return;

            Object.values(cart).forEach(item => {
                if (item.sub_category === 'soda' || item.sub_category === 'juice') hasDrinks = true;
                if (item.sub_category === 'water') hasWater = true;
                if (item.id === 27) hasFries = true; // 27 ŸáŸà ID ÿßŸÑÿ®ÿ∑ÿßÿ∑ÿ≥

                list.innerHTML += `
                    <div class="flex justify-between items-center text-sm border-b border-dark-800 pb-3 last:border-0 animate-slide-up-smooth">
                        <div class="flex items-center gap-3">
                            <span class="bg-dark-800 text-brand-500 px-2.5 py-1 rounded text-xs font-bold border border-dark-700">x${item.qty}</span>
                            <span class="font-medium text-gray-200">${item.name}</span>
                        </div>
                        <div class="flex items-center gap-3">
                             <span class="font-bold text-brand-500">${item.price * item.qty}</span>
                             <button onclick="removeFromCart(${item.id})" class="text-red-400 text-xs px-2 py-1 bg-red-900/10 rounded hover:bg-red-900/30 transition">‚úï</button>
                        </div>
                    </div>
                `;
            });

            // ÿ®ŸÜÿßÿ° ŸÇÿ≥ŸÖ Upsell ÿØŸäŸÜÿßŸÖŸäŸÉŸäÿßŸã
            const upsellSection = document.getElementById('upsell-section');
            let upsellHTML = '';
            let showUpsell = false;

            // 1. ÿ•ÿ∞ÿß ŸÑŸÖ Ÿäÿ∑ŸÑÿ® ŸÖÿ¥ÿ±Ÿàÿ® (Sodas ÿ£Ÿà Juice) - ÿßŸÇÿ™ÿ±ÿßÿ≠ Hamoud (ID 13) ÿ®ÿØŸÑÿßŸã ŸÖŸÜ Slim Orange ÿßŸÑŸÖÿ≠ÿ∞ŸàŸÅ ŸÖŸÜ ÿßŸÑÿπÿµÿßÿ¶ÿ±
            if (!hasDrinks) {
                const drink = products.find(p => p.id === 13); // Hamoud
                if (drink) {
                    upsellHTML += `
                        <div class="relative flex justify-between items-center bg-dark-800/50 p-2 rounded-lg border border-dark-700">
                            <div class="flex items-center gap-3">
                                <img src="${drink.img}" class="w-10 h-10 rounded-lg object-cover shadow-sm grayscale-[20%] border border-brand-500/20">
                                <div class="text-sm">
                                    <p class="font-bold text-gray-100 flex items-center gap-1">${drink.name} <span class="text-[9px] bg-brand-500 text-dark-950 px-1 rounded">ŸÖŸÜÿπÿ¥!</span></p>
                                    <p class="text-brand-500 font-bold text-xs">+${drink.price} ÿØ.ÿ¨</p>
                                </div>
                            </div>
                            <button onclick="addUpsell(${drink.id})" class="bg-brand-500 text-dark-950 w-8 h-8 rounded-lg flex items-center justify-center font-bold hover:bg-brand-400 transition-all shadow-sm text-lg leading-none">+</button>
                        </div>
                    `;
                    showUpsell = true;
                }
            }

            // 2. ÿ•ÿ∞ÿß ŸÑŸÖ Ÿäÿ∑ŸÑÿ® ŸÖÿßÿ° - ÿßŸÇÿ™ÿ±ÿßÿ≠ Ifri Petit (ID 25)
            if (!hasWater) {
                const water = products.find(p => p.id === 25);
                if (water) {
                    upsellHTML += `
                        <div class="relative flex justify-between items-center bg-dark-800/50 p-2 rounded-lg border border-dark-700 ${showUpsell ? 'mt-2' : ''}">
                            <div class="flex items-center gap-3">
                                <img src="${water.img}" class="w-10 h-10 rounded-lg object-cover shadow-sm grayscale-[20%] border border-brand-500/20">
                                <div class="text-sm">
                                    <p class="font-bold text-gray-100">Eau Min√©rale</p>
                                    <p class="text-brand-500 font-bold text-xs">+${water.price} ÿØ.ÿ¨</p>
                                </div>
                            </div>
                            <button onclick="addUpsell(${water.id})" class="bg-brand-500 text-dark-950 w-8 h-8 rounded-lg flex items-center justify-center font-bold hover:bg-brand-400 transition-all shadow-sm text-lg leading-none">+</button>
                        </div>
                    `;
                    showUpsell = true;
                }
            }

            // 3. ÿ•ÿ∞ÿß ŸÑŸÖ Ÿäÿ∑ŸÑÿ® ÿ®ÿ∑ÿßÿ∑ÿ≥ - ÿßŸÇÿ™ÿ±ÿßÿ≠ Frites (ID 27)
            if (!hasFries) {
                const fries = products.find(p => p.id === 27);
                if (fries) {
                    upsellHTML += `
                        <div class="relative flex justify-between items-center bg-dark-800/50 p-2 rounded-lg border border-dark-700 ${showUpsell ? 'mt-2' : ''}">
                            <div class="flex items-center gap-3">
                                <img src="${fries.img}" class="w-10 h-10 rounded-lg object-cover shadow-sm grayscale-[20%] border border-brand-500/20">
                                <div class="text-sm">
                                    <p class="font-bold text-gray-100">Frites ?</p>
                                    <p class="text-brand-500 font-bold text-xs">+${fries.price} ÿØ.ÿ¨</p>
                                </div>
                            </div>
                            <button onclick="addUpsell(${fries.id})" class="bg-brand-500 text-dark-950 w-8 h-8 rounded-lg flex items-center justify-center font-bold hover:bg-brand-400 transition-all shadow-sm text-lg leading-none">+</button>
                        </div>
                    `;
                    showUpsell = true;
                }
            }

            if (showUpsell) {
                upsellSection.innerHTML = `
                    <div class="absolute inset-0 bg-brand-500/5 animate-pulse pointer-events-none"></div>
                    <p class="text-xs text-brand-500 font-bold mb-2 px-1">‚ú® ŸÖÿß ÿ±ÿ£ŸäŸÉ ŸÅŸä ÿ•ÿ∂ÿßŸÅÿ© ÿ®ÿπÿ∂ ÿßŸÑÿßŸÜÿ™ÿπÿßÿ¥ÿü</p>
                    ${upsellHTML}
                `;
                upsellSection.classList.remove('hidden');
                upsellSection.classList.add('flex', 'flex-col');
            } else {
                upsellSection.classList.add('hidden');
                upsellSection.classList.remove('flex', 'flex-col');
            }

            document.getElementById('cart-modal').classList.remove('hidden');
        }

        function closeCartModal() {
            document.getElementById('cart-modal').classList.add('hidden');
        }

        function removeFromCart(id) {
            delete cart[id];
            const controlsDiv = document.getElementById(`controls-${id}`);
            if(controlsDiv) controlsDiv.innerHTML = generateControlsHTML(id, 0);
            updateCartBar();
            openCartModal();
            if(Object.keys(cart).length === 0) closeCartModal();
        }

        function addUpsell(id) {
            updateCart(id, 1);
            openCartModal(); // Refresh to hide the added upsell
        }

        const WEBHOOK_URL = "https://n8n.panel.vidsai.site/webhook/c25c8a4a-e633-4ae8-80f0-adece675548b"; 
// ÿØÿßŸÑÿ© ŸÑÿ¨ŸÑÿ® ÿ±ŸÇŸÖ ÿßŸÑÿ∑ÿßŸàŸÑÿ© ŸÖŸÜ ÿßŸÑÿ±ÿßÿ®ÿ∑
        function getTableNumber() {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get('table') || '5';
        }
        async function submitOrder() {
            if (Object.keys(cart).length === 0) return;

            const btn = document.querySelector('#cart-modal button:last-child');
            const originalText = btn.innerHTML;
            btn.innerHTML = `<svg class="animate-spin h-5 w-5 text-white ml-2 inline" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> ÿ¨ÿßÿ±Ÿç ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ÿßŸÑŸÖÿ∑ÿ®ÿÆ...`;
            btn.disabled = true;

            const orderData = {
            order_id: Math.floor(1000 + Math.random() * 9000),
                table: getTableNumber(),
                total: document.getElementById('final-price').innerText,
                items: Object.values(cart).map(item => ({
                    name: item.name,
                    qty: item.qty,
                    price: item.price
                })),
                time: new Date().toLocaleString('ar-DZ')
            };

            try {
                const response = await fetch(WEBHOOK_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(orderData)
                });

                if (response.ok) {
                    closeCartModal();
                    
                    const successModal = document.getElementById('success-modal');
                    successModal.classList.remove('hidden');
                    successModal.classList.add('flex');

                    cart = {};
                    updateCartBar();
                } else {
                    throw new Error('ŸÅÿ¥ŸÑ ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ÿßŸÑÿ≥Ÿäÿ±ŸÅÿ±');
                }

            } catch (error) {
                console.error(error);
                alert("ÿπÿ∞ÿ±ÿßŸãÿå ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ÿßŸÑŸÖÿ∑ÿ®ÿÆ! Ÿäÿ±ÿ¨Ÿâ ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ© ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ.");
            } finally {
                btn.innerHTML = originalText;
                btn.disabled = false;
            }
        }

        // --- 6. ScrollSpy & Animations Logic ---

        document.addEventListener('DOMContentLoaded', () => {
            renderAllSections();

            // Intersection Observer for Animations (Reveal on Scroll)
            const revealObserver = new IntersectionObserver((entries) => {
                entries.forEach((entry, index) => {
                    if (entry.isIntersecting) {
                        // Add delay based on index for stagger effect if multiple appear at once
                        setTimeout(() => {
                            entry.target.classList.add('reveal-visible');
                        }, index * 50); 
                        revealObserver.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.1, rootMargin: '50px' });

            document.querySelectorAll('.reveal-on-scroll').forEach(el => revealObserver.observe(el));

            // Intersection Observer for ScrollSpy (LED Glow)
            const sections = ['burger', 'pizza', 'drinks', 'sides'];
            const navObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const id = entry.target.id.replace('section-', '');
                        // Remove active class from all
                        document.querySelectorAll('.nav-btn').forEach(btn => {
                            btn.classList.remove('nav-active');
                            btn.classList.add('bg-dark-900', 'text-gray-400');
                        });
                        // Add active class to current
                        const activeBtn = document.getElementById(`nav-${id}`);
                        if(activeBtn) {
                            activeBtn.classList.remove('bg-dark-900', 'text-gray-400');
                            activeBtn.classList.add('nav-active');
                            
                            // Scroll nav to view if offscreen
                            activeBtn.scrollIntoView({ behavior: 'smooth', inline: 'center', block: 'nearest' });
                        }
                    }
                });
            }, { threshold: 0.2, rootMargin: '-20% 0px -60% 0px' }); // Adjust margins for better triggering point

            sections.forEach(sec => {
                const el = document.getElementById(`section-${sec}`);
                if(el) navObserver.observe(el);
            });
            
            // Set initial active
            document.getElementById('nav-burger').classList.add('nav-active');
            document.getElementById('nav-burger').classList.remove('bg-dark-900', 'text-gray-400');
        });

    </script>
    <div id="success-modal" class="fixed inset-0 bg-dark-950/95 z-[70] hidden flex flex-col items-center justify-center p-4 text-center animate-zoom-in">
        <div class="w-24 h-24 bg-green-500/10 rounded-full flex items-center justify-center mb-6 border border-green-500/20 shadow-[0_0_30px_rgba(34,197,94,0.2)]">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" />
            </svg>
        </div>
        <h2 class="text-3xl font-black text-white mb-2">ÿ™ŸÖ ÿßÿ≥ÿ™ŸÑÿßŸÖ ÿ∑ŸÑÿ®ŸÉ!</h2>
        <p class="text-gray-400 mb-8 max-w-xs leading-relaxed">ÿßŸÑŸÖÿ∑ÿ®ÿÆ ŸäŸÇŸàŸÖ ÿ®ÿ™ÿ≠ÿ∂Ÿäÿ± Ÿàÿ¨ÿ®ÿ™ŸÉ ÿßŸÑÿ¢ŸÜ.</p>
        
        <button onclick="location.reload()" class="bg-dark-800 text-white px-8 py-4 rounded-xl font-bold border border-dark-700 hover:bg-dark-700 hover:border-brand-500/50 transition-all w-full max-w-xs shadow-lg">
            ÿßŸÑÿ±ÿ¨Ÿàÿπ ŸÑÿµŸÅÿ≠ÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©
        </button>
    </div>
    <div class="fixed bottom-24 left-4 z-40">
        <button onclick="callWaiter()" id="waiter-btn" class="w-12 h-12 bg-dark-800 border border-brand-500 text-brand-500 rounded-full shadow-[0_0_15px_rgba(212,175,55,0.3)] flex items-center justify-center hover:scale-110 active:scale-95 transition-all duration-300 group">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 group-hover:animate-swing" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2C10.3431 2 9 3.34315 9 5V6.05202C6.73318 6.92484 5.2323 9.27891 5.62024 11.9939L6.19169 15.9939C6.26252 16.4897 6.03759 16.9855 5.61746 17.2656L4.2886 18.1515C3.76672 18.4994 3.86433 19.324 4.45331 19.5298C6.91896 20.3916 9.53917 20.7302 12 20.7302C14.4608 20.7302 17.081 20.3916 19.5467 19.5298C20.1357 19.324 20.2333 18.4994 19.7114 18.1515L18.3825 17.2656C17.9624 16.9855 17.7375 16.4897 17.8083 15.9939L18.3798 11.9939C18.7677 9.27891 17.2668 6.92484 15 6.05202V5C15 3.34315 13.6569 2 12 2ZM14 22C14 23.1046 13.1046 24 12 24C10.8954 24 10 23.1046 10 22H14Z"></path>
            </svg>
        </button>
    </div>

    <style>
    @keyframes swing {
        0%, 100% { transform: rotate(0deg); }
        20% { transform: rotate(15deg); }
        40% { transform: rotate(-10deg); }
        60% { transform: rotate(5deg); }
        80% { transform: rotate(-5deg); }
    }
    .group-hover\:animate-swing:hover {
        animation: swing 1s ease-in-out infinite;
    }
    </style>
</body>
</html>